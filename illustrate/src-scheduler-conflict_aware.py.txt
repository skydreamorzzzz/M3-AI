一、文件核心定位
该文件是调度器专用的打分公式模块，核心作用：
为每个约束计算 “优先级分数”；
调度器依据分数高低，优先选择分数高的约束进行修复。
二、核心思想
优先修复：影响大 + 关联多 + 冲突风险低 的约束
核心打分公式
score = 结构重要性 - 冲突惩罚
具体计算公式：
score = (w_out_degree × out_degree) + (w_coupling_degree × coupling_degree) - (alpha_conflict × conflict_risk)
三、公式变量说明
变量名	含义	对分数的影响
out_degree（出度）	有多少约束 “依赖该约束”（该约束是多少约束的前置关键节点）	出度越大，分数越高，优先级越高
coupling_degree（耦合度）	该约束与多少其他约束存在 “软耦合” 关系	耦合度越高，分数越高，优先级越高
conflict_risk（冲突风险）	外部统计的 “修复该约束可能破坏其他约束” 的风险值	风险越高，分数越低，优先级越低
变量示例（out_degree）
约束依赖链：OBJECT → COUNT → SPATIAL
→ OBJECT 的出度更高，会被优先计算为高优先级，优先修复。
四、核心函数说明
1. score_one()
作用：为单个约束计算优先级分数；
输入参数：出度、耦合度、冲突风险、三个权重（w_out_degree/w_coupling_degree/alpha_conflict）；
输出：单个 float 类型的分数值。
2. compute_conflict_scores()
作用：批量计算所有约束的优先级分数；
核心特点：自动取所有约束 ID 的并集，避免部分约束仅出现在某个字典中导致漏算；
输出格式：
{
"cid1": 分数值 1,
"cid2": 分数值 2,
...
}
五、默认权重配置
（权重为可调参数，可根据场景调整）
w_out_degree = 1.0 （出度权重最高，最核心）
w_coupling_degree = 0.3 （耦合度权重次之）
alpha_conflict = 0.5 （冲突风险惩罚项权重）
权重说明
出度是最重要的优先级判定维度；
耦合度为次要维度；
冲突风险是扣分项，降低高风险约束的优先级。
六、系统中的角色
该模块是调度器的 “打分工具”，在调度器中的调用流程：
构图 → 统计约束的出度 / 耦合度 → 调用 compute_conflict_scores () 计算分数 → 按分数排序 → 选择最高分约束修复
模块特性
纯数学打分逻辑，不依赖 LLM、不依赖图结构细节；
仅负责 “计算分数”，不参与具体修复逻辑。
七、设计特点
完全确定性（deterministic）：相同输入必然得到相同分数；
无副作用：仅计算分数，不修改任何外部数据；
可单独测试：脱离调度器可独立验证打分逻辑；
可扩展替换：可替换为更复杂的打分模型（如机器学习模型）。
八、核心总结
该模块仅决定调度器 “下一步修哪个约束”，不涉及 “怎么修”，是调度器实现 “智能选修” 的核心数学工具。